<div class="container py-5 d-flex flex-column align-items-center">
  <h2>Log in</h2>
  <div class="col-5 mb-3">
    <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
      <div class="form-group mt-4">
        <%= f.label :email %><br />
        <%= f.email_field :email, autofocus: true, placeholder: "email@mail.com", :class=>"form-control rounded-pill" %>
        <div class="invalid-feedback">
            Please enter email in format: name@example.com
        </div>
      </div>

      <div class="form-group mt-4">
        <%= f.label :password %>
        <%= f.password_field :password, placeholder: "password", :class=>"form-control rounded-pill" %>
        <div class="invalid-feedback">
            Please enter your password
        </div>
      </div>

      <% if devise_mapping.rememberable? %>
        <div class="form-group mt-4">
          <%= f.check_box :remember_me %>
          <%= f.label :remember_me %>
        </div>
      <% end %>

      <div class="form-group mt-4 d-flex">
        <%= f.submit "Log in", :class=>"btn btn-outline-primary rounded-pill px-5 mx-auto" %>
      </div>
    <% end %>
  </div>
  <%= render "devise/shared/links" %>
</div>

<script type="text/javascript">

  // Валидация формы при отправке запроса
  $("#new_user").on("submit", function (event) {
    return validateForm();
  });


  function validateForm(){
    result = true;
    user_email = $('#user_email');
    user_password = $('#user_password');

    if (isEmail(user_email.val()) == false){
      $(user_email).addClass("is-invalid");
      result = false;
    } else {;
      $(user_email).removeClass("is-invalid");
      $(user_email).addClass("is-valid");
    }

    if (user_password.val() == ""){
        $(user_password).addClass("is-invalid");
        result = false;
    } else {
      $(user_password).removeClass("is-invalid");
      $(user_password).addClass("is-valid");
    }

    return result;
  }

  function isEmail(email) {
    var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
    return regex.test(email);
  }

</script>
